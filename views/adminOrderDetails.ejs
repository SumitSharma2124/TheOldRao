<section id="adminOrderDetailsRoot" class="container order-details-page" data-order-id="<%= order._id %>" data-status="<%= order.status %>">

  <a href="/admin/orders" class="back-btn">← Back to Orders</a>

  <h2>Order #<%= String(order._id).slice(-6).toUpperCase() %></h2>

  <!-- ORDER SUMMARY CARD -->
  <div class="order-card">
    <div style="display:flex; justify-content:space-between; align-items:center; gap:12px; flex-wrap:wrap;">
      <div>
        <p style="margin:0;"><strong>Placed:</strong> <%= order.createdAt.toLocaleString() %></p>
        <p style="margin:0;"><strong>Payment:</strong> <%= order.payment || "N/A" %></p>
      </div>
      <div>
        <span class="status-badge <%= order.status.toLowerCase().replaceAll(' ','-') %>"><%= order.status %></span>
      </div>
    </div>

    <hr>

    <div style="display:grid; grid-template-columns: 1fr 1fr; gap:16px; align-items:start;">
      <div>
        <h3>Items</h3>
        <ul class="item-list">
          <% order.items.forEach(i => { %>
            <li>
              <span><strong>x<%= i.qty %></strong> — <%= i.name %></span>
              <span>₹<%= i.qty * i.price %></span>
            </li>
          <% }) %>
        </ul>
        <div class="item-row" style="margin-top:8px;">
          <span><strong>Total</strong></span>
          <strong>₹<%= order.total %></strong>
        </div>
      </div>

      <div>
        <h3>Customer</h3>
        <p><strong>Name:</strong> <%= order.name || "Guest" %></p>
        <p><strong>Phone:</strong> <%= order.phone || "N/A" %></p>
        <p><strong>Address:</strong> <%= order.address || "Pickup" %></p>
      </div>
    </div>

    <hr>

    <div class="status-buttons">
      <a href="/admin/orders/update/<%= order._id %>?status=Preparing" class="status-btn prepare">Preparing</a>
      <a href="/admin/orders/update/<%= order._id %>?status=Out for Delivery" class="status-btn out">Out for Delivery</a>
      <a href="/admin/orders/update/<%= order._id %>?status=Completed" class="status-btn complete">Completed</a>
      <a href="/admin/orders/update/<%= order._id %>?status=Cancelled" class="status-btn cancel">Cancel</a>
      <button id="printTicketBtn" class="status-btn" style="background:#555;">Print Ticket</button>
    </div>

    <p style="margin-top:8px; color:#666; font-size:12px;">
      Shortcuts: 1=Preparing, 2=Out, 3=Completed, C=Cancel, P=Print
    </p>

  </div>

</section>
